<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ Jogos Adaptativos Avan√ßados - Sistema Completo</title>
    <style>
        * { box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 8px;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .game-card {
            border-radius: 12px;
            padding: 20px;
            border: 3px solid;
            position: relative;
            transition: all 0.3s ease;
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }

        .tea-card {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border-color: #3b82f6;
        }

        .tdah-card {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-color: #f59e0b;
        }

        .down-card {
            background: linear-gradient(135deg, #fce7f3, #f3e8ff);
            border-color: #a855f7;
        }

        .intellectual-card {
            background: linear-gradient(135deg, #ecfdf5, #d1fae5);
            border-color: #10b981;
        }

        .visual-card {
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
            border-color: #ef4444;
        }

        .motor-card {
            background: linear-gradient(135deg, #f0fdfa, #ccfbf1);
            border-color: #06b6d4;
        }

        .game-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .game-subtitle {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 15px;
        }

        .game-content {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .game-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Jogos Espec√≠ficos */
        .sequence-puzzle {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .sequence-item {
            aspect-ratio: 1;
            background: white;
            border: 3px solid #3b82f6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .sequence-item:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
        }

        .sequence-item.correct {
            background: #10b981;
            color: white;
            border-color: #059669;
        }

        .sequence-item.incorrect {
            background: #ef4444;
            color: white;
            border-color: #dc2626;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .rhythm-matching {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: start;
            margin: 20px 0;
        }

        .rhythm-cards {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .rhythm-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 3px solid #f59e0b;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .rhythm-card:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.3);
        }

        .rhythm-card.selected {
            border-color: #3b82f6;
            background: #dbeafe;
        }

        .rhythm-card.matched {
            border-color: #10b981;
            background: #d1fae5;
            opacity: 0.7;
        }

        .connection-area {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            height: 100%;
        }

        .connection-line {
            height: 4px;
            background: #10b981;
            border-radius: 2px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .connection-line.active {
            opacity: 1;
        }

        .classification-game {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .items-pool {
            background: #f8fafc;
            border-radius: 10px;
            padding: 20px;
            min-height: 300px;
        }

        .cultural-item {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border: 2px solid #a855f7;
            cursor: grab;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .cultural-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(168, 85, 247, 0.3);
        }

        .cultural-item.dragging {
            opacity: 0.5;
            transform: rotate(3deg);
        }

        .drop-zones {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .drop-zone {
            min-height: 120px;
            border: 3px dashed #a855f7;
            border-radius: 10px;
            background: #fce7f3;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .drop-zone.dragover {
            border-color: #7c3aed;
            background: #f3e8ff;
            transform: scale(1.02);
        }

        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            max-width: 500px;
            margin: 20px auto;
        }

        .memory-card {
            aspect-ratio: 1;
            background: #4f46e5;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
            font-size: 1.2rem;
        }

        .memory-card:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(79, 70, 229, 0.3);
        }

        .memory-card.flipped {
            background: white;
            color: #333;
            border: 2px solid #4f46e5;
        }

        .memory-card.matched {
            background: #10b981;
            transform: scale(0.95);
        }

        .story-game {
            background: #f8fafc;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .story-scene {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #3b82f6;
        }

        .story-choices {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .story-choice {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e5e7eb;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .story-choice:hover {
            border-color: #3b82f6;
            background: #f0f9ff;
        }

        .word-puzzle {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }

        .word-scramble {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #10b981;
            text-align: center;
        }

        .scrambled-letters {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
        }

        .letter-tile {
            width: 40px;
            height: 40px;
            background: #3b82f6;
            color: white;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .letter-tile:hover {
            transform: scale(1.1);
            background: #2563eb;
        }

        .letter-tile.selected {
            background: #10b981;
            transform: scale(0.9);
        }

        .audio-game {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
        }

        .audio-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }

        .audio-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .audio-btn:hover {
            background: #2563eb;
            transform: scale(1.05);
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-start { background: linear-gradient(45deg, #10b981, #059669); }
        .btn-reset { background: linear-gradient(45deg, #ef4444, #dc2626); }
        .btn-hint { background: linear-gradient(45deg, #f59e0b, #d97706); }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #10b981, #059669);
            border-radius: 10px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .feedback {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .feedback.success {
            background: #d1fae5;
            color: #065f46;
            border: 2px solid #10b981;
        }

        .feedback.encouragement {
            background: #fef3c7;
            color: #92400e;
            border: 2px solid #f59e0b;
        }

        .feedback.celebration {
            background: #fce7f3;
            color: #7c2d12;
            border: 2px solid #a855f7;
            animation: celebration 1s ease-out;
        }

        .feedback.hint {
            background: #e0f2fe;
            color: #0c4a6e;
            border: 2px solid #0284c7;
        }

        @keyframes celebration {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .level-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .level-star {
            font-size: 1.5rem;
            color: #fbbf24;
            transition: all 0.3s ease;
        }

        .level-star.earned {
            animation: starEarn 0.5s ease-out;
        }

        @keyframes starEarn {
            0% { transform: scale(0); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }

        .timer {
            background: #ef4444;
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
            min-width: 100px;
        }

        .timer.warning {
            background: #f59e0b;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .score-display {
            background: #3b82f6;
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 15px 0;
        }

        .score-number {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .achievement-badge {
            background: linear-gradient(45deg, #fbbf24, #f59e0b);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin: 5px;
            animation: badgeEarn 0.8s ease-out;
        }

        @keyframes badgeEarn {
            0% { transform: scale(0) rotate(-180deg); opacity: 0; }
            50% { transform: scale(1.2) rotate(-90deg); opacity: 0.8; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .game-instructions {
            background: #f0f9ff;
            border: 2px solid #3b82f6;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .game-instructions h4 {
            margin: 0 0 10px 0;
            color: #1e40af;
        }

        .difficulty-selector {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            align-items: center;
        }

        .difficulty-btn {
            padding: 8px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 20px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .difficulty-btn.active {
            border-color: #3b82f6;
            background: #3b82f6;
            color: white;
        }

        .difficulty-btn:hover {
            border-color: #3b82f6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéÆ Sistema Avan√ßado de Jogos Adaptativos</h1>
            <p>Cole√ß√£o completa de jogos educativos para todos os tipos de necessidades especiais</p>
        </div>

        <div class="games-grid">
            <!-- JOGO 1: SEQU√äNCIA L√ìGICA MELHORADA (TEA) -->
            <div class="game-card tea-card">
                <div class="game-title">
                    üß© <span>Sequ√™ncia Musical Avan√ßada (TEA)</span>
                </div>
                <div class="game-subtitle">Organize os per√≠odos musicais na ordem correta</div>

                <div class="difficulty-selector">
                    <span>Dificuldade:</span>
                    <div class="difficulty-btn active" data-level="1">F√°cil</div>
                    <div class="difficulty-btn" data-level="2">M√©dio</div>
                    <div class="difficulty-btn" data-level="3">Dif√≠cil</div>
                </div>

                <button class="btn btn-start" onclick="startSequenceGame()">‚ñ∂Ô∏è Iniciar</button>
                <button class="btn btn-reset" onclick="resetSequenceGame()">üîÑ Reiniciar</button>
                <button class="btn btn-hint" onclick="showSequenceHint()">üí° Dica</button>

                <div class="game-content" id="sequence-game">
                    <div class="game-instructions">
                        <h4>üìã Como jogar:</h4>
                        <p>Clique nos itens na ordem cronol√≥gica correta. Comece pelo mais antigo!</p>
                    </div>

                    <div class="sequence-puzzle" id="sequence-container">
                        <!-- Itens ser√£o criados dinamicamente -->
                    </div>

                    <div class="level-indicator">
                        <span>N√≠vel:</span>
                        <span class="level-star">‚≠ê</span>
                        <span class="level-star">‚≠ê</span>
                        <span class="level-star">‚≠ê</span>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" id="sequence-progress" style="width: 0%">0% Completo</div>
                    </div>

                    <div class="feedback" id="sequence-feedback" style="display: none;"></div>
                </div>
            </div>

            <!-- JOGO 2: RITMOS PERNAMBUCANOS TURBO (TDAH) -->
            <div class="game-card tdah-card">
                <div class="game-title">
                    ‚ö° <span>Ritmos PE Turbo Challenge (TDAH)</span>
                </div>
                <div class="game-subtitle">Conecte ritmos com caracter√≠sticas em tempo limitado</div>

                <button class="btn btn-start" onclick="startRhythmGame()">üöÄ Iniciar</button>
                <button class="btn btn-reset" onclick="resetRhythmGame()">üîÑ Reiniciar</button>

                <div class="game-content" id="rhythm-game">
                    <div class="timer" id="rhythm-timer">60s</div>

                    <div class="score-display">
                        <div>Pontua√ß√£o</div>
                        <div class="score-number" id="rhythm-score">0</div>
                        <div>Combo: <span id="rhythm-combo">0</span>x</div>
                    </div>

                    <div class="rhythm-matching" id="rhythm-container">
                        <!-- Conte√∫do ser√° criado dinamicamente -->
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" id="rhythm-progress" style="width: 0%">0% Completo</div>
                    </div>

                    <div class="feedback" id="rhythm-feedback" style="display: none;"></div>
                </div>
            </div>

            <!-- JOGO 3: CLASSIFICADOR CULTURAL VISUAL (S√çNDROME DE DOWN) -->
            <div class="game-card down-card">
                <div class="game-title">
                    üåà <span>Organizador Cultural Feliz (Down)</span>
                </div>
                <div class="game-subtitle">Arraste os itens para as caixas certas com muito carinho!</div>

                <button class="btn btn-start" onclick="startClassificationGame()">üéØ Iniciar</button>
                <button class="btn btn-reset" onclick="resetClassificationGame()">üîÑ Reiniciar</button>

                <div class="game-content" id="classification-game">
                    <div class="game-instructions">
                        <h4>üíù Voc√™ √© muito especial!</h4>
                        <p>Arraste cada item para a caixa correta. Voc√™ consegue! üòä</p>
                    </div>

                    <div class="classification-game">
                        <div class="items-pool" id="items-pool">
                            <h3>üì¶ Itens para Organizar</h3>
                            <!-- Itens ser√£o criados dinamicamente -->
                        </div>

                        <div class="drop-zones">
                            <div class="drop-zone" data-category="material">
                                <div style="font-size: 2rem;">üîß</div>
                                <h3>MATERIAL</h3>
                                <p>Coisas que voc√™ pode tocar!</p>
                            </div>
                            <div class="drop-zone" data-category="imaterial">
                                <div style="font-size: 2rem;">üí≠</div>
                                <h3>IMATERIAL</h3>
                                <p>Ideias e tradi√ß√µes!</p>
                            </div>
                        </div>
                    </div>

                    <div class="level-indicator">
                        <span>Voc√™ √© incr√≠vel:</span>
                        <span class="level-star">‚≠ê</span>
                        <span class="level-star">‚≠ê</span>
                        <span class="level-star">‚≠ê</span>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" id="classification-progress" style="width: 0%">0% Completo</div>
                    </div>

                    <div class="feedback" id="classification-feedback" style="display: none;"></div>
                </div>
            </div>

            <!-- JOGO 4: MEM√ìRIA CULTURAL SIMPLES (DEFICI√äNCIA INTELECTUAL) -->
            <div class="game-card intellectual-card">
                <div class="game-title">
                    üß† <span>Mem√≥ria Cultural Simples (DI)</span>
                </div>
                <div class="game-subtitle">Encontre os pares de cultura material e imaterial</div>

                <button class="btn btn-start" onclick="startMemoryGame()">üéØ Iniciar</button>
                <button class="btn btn-reset" onclick="resetMemoryGame()">üîÑ Reiniciar</button>

                <div class="game-content" id="memory-game">
                    <div class="game-instructions">
                        <h4>üéØ Objetivo:</h4>
                        <p>Encontre os pares! Cada objeto tem seu par. Voc√™ consegue!</p>
                    </div>

                    <div class="memory-grid" id="memory-container">
                        <!-- Cards ser√£o criados dinamicamente -->
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" id="memory-progress" style="width: 0%">0% Completo</div>
                    </div>

                    <div class="feedback" id="memory-feedback" style="display: none;"></div>
                </div>
            </div>

            <!-- JOGO 5: HIST√ìRIA INTERATIVA (DEFICI√äNCIA INTELECTUAL) -->
            <div class="game-card intellectual-card">
                <div class="game-title">
                    üìö <span>Aventura Cultural (DI)</span>
                </div>
                <div class="game-subtitle">Ajude Ana a descobrir sobre cultura pernambucana</div>

                <button class="btn btn-start" onclick="startStoryGame()">üìñ Iniciar Hist√≥ria</button>
                <button class="btn btn-reset" onclick="resetStoryGame()">üîÑ Recome√ßar</button>

                <div class="game-content" id="story-game">
                    <div class="story-game" id="story-container">
                        <!-- Hist√≥ria ser√° criada dinamicamente -->
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" id="story-progress" style="width: 0%">0% da Hist√≥ria</div>
                    </div>

                    <div class="feedback" id="story-feedback" style="display: none;"></div>
                </div>
            </div>

            <!-- JOGO 6: QUEBRA-CABE√áA DE PALAVRAS (DEFICI√äNCIA VISUAL) -->
            <div class="game-card visual-card">
                <div class="game-title">
                    üî§ <span>Palavras Culturais (Defici√™ncia Visual)</span>
                </div>
                <div class="game-subtitle">Forme palavras sobre cultura com alto contraste</div>

                <button class="btn btn-start" onclick="startWordGame()">üî§ Iniciar</button>
                <button class="btn btn-reset" onclick="resetWordGame()">üîÑ Reiniciar</button>

                <div class="game-content" id="word-game">
                    <div class="word-puzzle" id="word-container">
                        <!-- Palavras ser√£o criadas dinamicamente -->
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" id="word-progress" style="width: 0%">0% Completo</div>
                    </div>

                    <div class="feedback" id="word-feedback" style="display: none;"></div>
                </div>
            </div>

            <!-- JOGO 7: JOGO DE √ÅUDIO (DEFICI√äNCIA VISUAL) -->
            <div class="game-card visual-card">
                <div class="game-title">
                    üéµ <span>Reconhecimento de Ritmos (Defici√™ncia Visual)</span>
                </div>
                <div class="game-subtitle">Identifique ritmos pernambucanos pelo som</div>

                <button class="btn btn-start" onclick="startAudioGame()">üéµ Iniciar</button>
                <button class="btn btn-reset" onclick="resetAudioGame()">üîÑ Reiniciar</button>

                <div class="game-content" id="audio-game">
                    <div class="audio-game" id="audio-container">
                        <h3>üéß Ou√ßa o ritmo e escolha a resposta correta</h3>

                        <div class="audio-controls">
                            <button class="audio-btn" id="play-audio">‚ñ∂Ô∏è Reproduzir</button>
                            <button class="audio-btn" id="repeat-audio">üîÑ Repetir</button>
                        </div>

                        <div id="audio-choices">
                            <!-- Op√ß√µes ser√£o criadas dinamicamente -->
                        </div>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" id="audio-progress" style="width: 0%">0% Completo</div>
                    </div>

                    <div class="feedback" id="audio-feedback" style="display: none;"></div>
                </div>
            </div>

            <!-- JOGO 8: CONSTRUTOR DE RITMOS (DEFICI√äNCIA MOTORA) -->
            <div class="game-card motor-card">
                <div class="game-title">
                    ü•Å <span>Construtor de Ritmos (Defici√™ncia Motora)</span>
                </div>
                <div class="game-subtitle">Crie ritmos usando bot√µes grandes e f√°ceis</div>

                <button class="btn btn-start" onclick="startRhythmBuilder()">üéµ Iniciar</button>
                <button class="btn btn-reset" onclick="resetRhythmBuilder()">üîÑ Reiniciar</button>

                <div class="game-content" id="rhythm-builder">
                    <div id="rhythm-builder-container">
                        <!-- Construtor ser√° criado dinamicamente -->
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" id="builder-progress" style="width: 0%">0% Completo</div>
                    </div>

                    <div class="feedback" id="builder-feedback" style="display: none;"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // =====================================================================================
        // SISTEMA DE GERENCIAMENTO DE JOGOS
        // =====================================================================================

        class GameManager {
            constructor() {
                this.activeGames = new Set();
                this.scores = new Map();
                this.achievements = new Map();
            }

            startGame(gameId) {
                this.activeGames.add(gameId);
                this.scores.set(gameId, { score: 0, level: 1, combo: 0 });
            }

            endGame(gameId) {
                this.activeGames.delete(gameId);
            }

            updateScore(gameId, points, combo = 0) {
                const gameScore = this.scores.get(gameId) || { score: 0, level: 1, combo: 0 };
                gameScore.score += points;
                gameScore.combo = combo;
                this.scores.set(gameId, gameScore);
                this.checkAchievements(gameId);
            }

            checkAchievements(gameId) {
                const score = this.scores.get(gameId);
                if (score.score >= 100 && !this.achievements.has(`${gameId}_100`)) {
                    this.achievements.set(`${gameId}_100`, 'Primeira Centena');
                    this.showAchievement('üèÜ Primeira Centena! 100 pontos!');
                }
            }

            showAchievement(message) {
                const badge = document.createElement('div');
                badge.className = 'achievement-badge';
                badge.textContent = message;
                badge.style.position = 'fixed';
                badge.style.top = '20px';
                badge.style.right = '20px';
                badge.style.zIndex = '1000';
                document.body.appendChild(badge);

                setTimeout(() => {
                    badge.remove();
                }, 3000);
            }
        }

        const gameManager = new GameManager();

        // =====================================================================================
        // JOGO 1: SEQU√äNCIA L√ìGICA MELHORADA (TEA)
        // =====================================================================================

        let sequenceData = {
            easy: [
                { id: 1, text: 'Canto Gregoriano', period: 'In√≠cio (500-1000)', icon: '‚õ™' },
                { id: 2, text: 'Trovadores', period: 'Meio (1000-1300)', icon: 'üè∞' },
                { id: 3, text: 'Polifonia', period: 'Final (1300-1500)', icon: 'üéµ' }
            ],
            medium: [
                { id: 1, text: 'Canto Gregoriano', period: 'In√≠cio', icon: '‚õ™' },
                { id: 2, text: 'Trovadores', period: 'Meio', icon: 'üè∞' },
                { id: 3, text: 'Ars Nova', period: 'S√©culo XIV', icon: 'üéº' },
                { id: 4, text: 'Polifonia', period: 'Final', icon: 'üéµ' },
                { id: 5, text: 'Renascimento', period: 'Transi√ß√£o', icon: 'üåÖ' }
            ],
            hard: [
                { id: 1, text: 'Canto Gregoriano', period: '500-1000', icon: '‚õ™' },
                { id: 2, text: 'Organum', period: '900-1200', icon: 'üéπ' },
                { id: 3, text: 'Trovadores', period: '1100-1300', icon: 'üè∞' },
                { id: 4, text: 'Moteto', period: '1200-1400', icon: 'üìú' },
                { id: 5, text: 'Ars Nova', period: '1300-1400', icon: 'üéº' },
                { id: 6, text: 'Polifonia Complexa', period: '1400-1500', icon: 'üéµ' }
            ]
        };

        let currentSequence = [];
        let playerSequence = [];
        let sequenceLevel = 'easy';
        let hintsUsed = 0;

        function startSequenceGame() {
            gameManager.startGame('sequence');
            document.getElementById('sequence-game').classList.add('active');
            hintsUsed = 0;
            setupSequenceLevel();
        }

        function resetSequenceGame() {
            playerSequence = [];
            hintsUsed = 0;
            updateSequenceProgress();
            document.getElementById('sequence-feedback').style.display = 'none';
            setupSequenceLevel();
        }

        function setupSequenceLevel() {
            currentSequence = [...sequenceData[sequenceLevel]];
            // Embaralha para apresenta√ß√£o
            const shuffled = [...currentSequence].sort(() => Math.random() - 0.5);

            const container = document.getElementById('sequence-container');
            container.innerHTML = '';

            shuffled.forEach(item => {
                const element = document.createElement('div');
                element.className = 'sequence-item';
                element.dataset.id = item.id;
                element.innerHTML = `
                    <div style="font-size: 1.5rem;">${item.icon}</div>
                    <div style="font-size: 0.8rem; margin-top: 5px;">${item.text}</div>
                    <div style="font-size: 0.7rem; color: #666;">${item.period}</div>
                `;
                element.addEventListener('click', () => selectSequenceItem(item.id, element));
                container.appendChild(element);
            });
        }

        function selectSequenceItem(id, element) {
            if (element.classList.contains('correct') || element.classList.contains('incorrect')) {
                return;
            }

            const expectedId = playerSequence.length + 1;

            if (id === expectedId) {
                element.classList.add('correct');
                playerSequence.push(id);

                const progress = (playerSequence.length / currentSequence.length) * 100;
                updateSequenceProgress(progress);

                if (playerSequence.length === currentSequence.length) {
                    const bonus = Math.max(0, 50 - (hintsUsed * 10));
                    gameManager.updateScore('sequence', 100 + bonus);
                    showSequenceFeedback('üéâ Perfeito! Voc√™ organizou a sequ√™ncia corretamente!', 'celebration');
                    earnStar(1);
                } else {
                    showSequenceFeedback('‚úÖ Correto! Continue assim!', 'success');
                }
            } else {
                element.classList.add('incorrect');
                setTimeout(() => {
                    element.classList.remove('incorrect');
                }, 1000);
                showSequenceFeedback('üí™ Tente novamente! Pense na ordem cronol√≥gica.', 'encouragement');
            }
        }

        function showSequenceHint() {
            if (hintsUsed >= 2) {
                showSequenceFeedback('üí° Voc√™ j√° usou todas as dicas dispon√≠veis!', 'hint');
                return;
            }

            hintsUsed++;
            const nextExpected = playerSequence.length + 1;
            const hintItem = currentSequence.find(item => item.id === nextExpected);

            if (hintItem) {
                showSequenceFeedback(`üí° Dica: Procure por "${hintItem.text}" - ${hintItem.period}`, 'hint');
            }
        }

        function updateSequenceProgress(progress = 0) {
            const progressBar = document.getElementById('sequence-progress');
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '% Completo';
        }

        function showSequenceFeedback(message, type) {
            const feedback = document.getElementById('sequence-feedback');
            feedback.textContent = message;
            feedback.className = `feedback ${type}`;
            feedback.style.display = 'block';

            if (type !== 'celebration') {
                setTimeout(() => {
                    feedback.style.display = 'none';
                }, 3000);
            }
        }

        function earnStar(starNumber) {
            const stars = document.querySelectorAll('#sequence-game .level-star');
            if (stars[starNumber - 1]) {
                stars[starNumber - 1].classList.add('earned');
            }
        }

        // Seletor de dificuldade
        document.querySelectorAll('.tea-card .difficulty-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tea-card .difficulty-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                const levels = { 1: 'easy', 2: 'medium', 3: 'hard' };
                sequenceLevel = levels[btn.dataset.level];

                if (gameManager.activeGames.has('sequence')) {
                    resetSequenceGame();
                }
            });
        });

        // =====================================================================================
        // JOGO 2: RITMOS PERNAMBUCANOS TURBO (TDAH)
        // =====================================================================================

        let rhythmData = [
            { id: 'frevo', name: 'FREVO', icon: 'üíÉ', characteristics: ['R√°pido', 'Instrumentos de Sopro', 'Sombrinha'] },
            { id: 'maracatu', name: 'MARACATU', icon: 'üëë', characteristics: ['Cortejo Real', 'Alfaias', 'Rei e Rainha'] },
            { id: 'ciranda', name: 'CIRANDA', icon: 'üåä', characteristics: ['Dan√ßa em Roda', 'Praia', 'M√£os Dadas'] },
            { id: 'coco', name: 'COCO', icon: 'ü••', characteristics: ['Sapateado', 'Pandeiro', 'Improviso'] },
            { id: 'baiao', name: 'BAI√ÉO', icon: 'üéµ', characteristics: ['Forr√≥', 'Zabumba', 'Sanfona'] }
        ];

        let rhythmTimer = 60;
        let rhythmScore = 0;
        let rhythmCombo = 0;
        let rhythmMatches = 0;
        let rhythmInterval;
        let selectedRhythm = null;

        function startRhythmGame() {
            gameManager.startGame('rhythm');
            document.getElementById('rhythm-game').classList.add('active');
            rhythmTimer = 60;
            rhythmScore = 0;
            rhythmCombo = 0;
            rhythmMatches = 0;
            setupRhythmGame();
            startRhythmTimer();
        }

        function resetRhythmGame() {
            clearInterval(rhythmInterval);
            rhythmTimer = 60;
            rhythmScore = 0;
            rhythmCombo = 0;
            rhythmMatches = 0;
            selectedRhythm = null;
            updateRhythmDisplay();
            document.getElementById('rhythm-feedback').style.display = 'none';
            setupRhythmGame();
        }

        function setupRhythmGame() {
            const container = document.getElementById('rhythm-container');
            container.innerHTML = `
                <div class="rhythm-cards" id="rhythm-cards">
                    ${rhythmData.map(rhythm => `
                        <div class="rhythm-card" data-rhythm="${rhythm.id}">
                            <div style="font-size: 2rem;">${rhythm.icon}</div>
                            <h3>${rhythm.name}</h3>
                        </div>
                    `).join('')}
                </div>
                <div class="connection-area">
                    ${rhythmData.map(() => '<div class="connection-line"></div>').join('')}
                </div>
                <div class="rhythm-cards" id="characteristic-cards">
                    <!-- Caracter√≠sticas ser√£o embaralhadas aqui -->
                </div>
            `;

            // Embaralha e exibe caracter√≠sticas
            const allCharacteristics = rhythmData.flatMap(rhythm =>
                rhythm.characteristics.map(char => ({ rhythm: rhythm.id, text: char }))
            );

            const shuffledChars = allCharacteristics.sort(() => Math.random() - 0.5).slice(0, 5);

            const charContainer = document.getElementById('characteristic-cards');
            charContainer.innerHTML = shuffledChars.map(char => `
                <div class="rhythm-card" data-belongs="${char.rhythm}">
                    ${char.text}
                </div>
            `).join('');

            setupRhythmInteractions();
            updateRhythmDisplay();
        }

        function setupRhythmInteractions() {
            document.querySelectorAll('#rhythm-cards .rhythm-card').forEach(card => {
                card.addEventListener('click', () => {
                    if (selectedRhythm) {
                        selectedRhythm.classList.remove('selected');
                    }
                    selectedRhythm = card;
                    card.classList.add('selected');
                });
            });

            document.querySelectorAll('#characteristic-cards .rhythm-card').forEach(card => {
                card.addEventListener('click', () => {
                    if (selectedRhythm && !card.classList.contains('matched')) {
                        const rhythmType = selectedRhythm.dataset.rhythm;
                        const belongsTo = card.dataset.belongs;

                        if (rhythmType === belongsTo) {
                            // Acerto!
                            selectedRhythm.classList.add('matched');
                            card.classList.add('matched');

                            rhythmCombo++;
                            const points = 10 + (rhythmCombo * 5);
                            rhythmScore += points;
                            rhythmMatches++;

                            showRhythmFeedback(`üéØ ACERTOU! +${points} pontos!`, 'success');

                            if (rhythmMatches >= 5) {
                                endRhythmGame(true);
                            }
                        } else {
                            // Erro
                            rhythmCombo = 0;
                            showRhythmFeedback('üí™ Tente outra combina√ß√£o!', 'encouragement');
                        }

                        selectedRhythm.classList.remove('selected');
                        selectedRhythm = null;
                        updateRhythmDisplay();
                    }
                });
            });
        }

        function startRhythmTimer() {
            rhythmInterval = setInterval(() => {
                rhythmTimer--;
                updateRhythmTimer();

                if (rhythmTimer <= 0) {
                    endRhythmGame(false);
                }
            }, 1000);
        }

        function updateRhythmTimer() {
            const timerEl = document.getElementById('rhythm-timer');
            timerEl.textContent = rhythmTimer + 's';

            if (rhythmTimer <= 10) {
                timerEl.classList.add('warning');
            } else {
                timerEl.classList.remove('warning');
            }
        }

        function updateRhythmDisplay() {
            document.getElementById('rhythm-score').textContent = rhythmScore;
            document.getElementById('rhythm-combo').textContent = rhythmCombo;

            const progress = (rhythmMatches / 5) * 100;
            const progressBar = document.getElementById('rhythm-progress');
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '% Completo';
        }

        function endRhythmGame(completed) {
            clearInterval(rhythmInterval);
            gameManager.updateScore('rhythm', rhythmScore, rhythmCombo);

            if (completed) {
                showRhythmFeedback(`üèÜ INCR√çVEL! Voc√™ fez ${rhythmScore} pontos em ${60 - rhythmTimer} segundos!`, 'celebration');
            } else {
                showRhythmFeedback(`‚è∞ Tempo esgotado! Voc√™ fez ${rhythmScore} pontos. Tente novamente!`, 'encouragement');
            }
        }

        function showRhythmFeedback(message, type) {
            const feedback = document.getElementById('rhythm-feedback');
            feedback.textContent = message;
            feedback.className = `feedback ${type}`;
            feedback.style.display = 'block';

            setTimeout(() => {
                if (type !== 'celebration') {
                    feedback.style.display = 'none';
                }
            }, 2000);
        }

        // =====================================================================================
        // JOGO 3: CLASSIFICADOR CULTURAL (S√çNDROME DE DOWN)
        // =====================================================================================

        let classificationItems = [
            { name: 'Viol√£o', icon: 'üé∏', category: 'material', feedback: 'Voc√™ pode tocar o viol√£o!' },
            { name: 'M√∫sica', icon: 'üéµ', category: 'imaterial', feedback: 'M√∫sica √© uma arte linda!' },
            { name: 'Sombrinha', icon: '‚òÇÔ∏è', category: 'material', feedback: 'A sombrinha √© colorida!' },
            { name: 'Dan√ßa', icon: 'üíÉ', category: 'imaterial', feedback: 'Dan√ßar √© muito divertido!' },
            { name: 'Bolo', icon: 'üç∞', category: 'material', feedback: 'O bolo √© gostoso!' },
            { name: 'Receita', icon: 'üìù', category: 'imaterial', feedback: 'A receita ensina a cozinhar!' },
            { name: 'Fantasia', icon: 'üëó', category: 'material', feedback: 'A fantasia √© bonita!' },
            { name: 'Hist√≥ria', icon: 'üìñ', category: 'imaterial', feedback: 'Hist√≥rias s√£o m√°gicas!' }
        ];

        let classificationCorrect = 0;
        let classificationStars = 0;

        function startClassificationGame() {
            gameManager.startGame('classification');
            document.getElementById('classification-game').classList.add('active');
            classificationCorrect = 0;
            classificationStars = 0;
            setupClassificationGame();
        }

        function resetClassificationGame() {
            classificationCorrect = 0;
            classificationStars = 0;
            updateClassificationProgress();
            document.getElementById('classification-feedback').style.display = 'none';
            setupClassificationGame();
        }

        function setupClassificationGame() {
            const pool = document.getElementById('items-pool');
            const shuffledItems = [...classificationItems].sort(() => Math.random() - 0.5);

            pool.innerHTML = '<h3>üì¶ Itens para Organizar</h3>' +
                shuffledItems.map(item => `
                    <div class="cultural-item" draggable="true" data-category="${item.category}" data-feedback="${item.feedback}">
                        <span style="font-size: 2rem;">${item.icon}</span>
                        <span style="font-size: 1.2rem;">${item.name}</span>
                    </div>
                `).join('');

            setupClassificationDragDrop();
            updateClassificationProgress();
        }

        function setupClassificationDragDrop() {
            const items = document.querySelectorAll('.cultural-item');
            const dropZones = document.querySelectorAll('.drop-zone');

            items.forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', JSON.stringify({
                        category: e.target.dataset.category,
                        feedback: e.target.dataset.feedback
                    }));
                    e.target.classList.add('dragging');
                });

                item.addEventListener('dragend', (e) => {
                    e.target.classList.remove('dragging');
                });
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('dragover');
                });

                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('dragover');
                });

                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('dragover');

                    const data = JSON.parse(e.dataTransfer.getData('text/plain'));
                    const zoneCategory = zone.dataset.category;
                    const draggedItem = document.querySelector('.cultural-item.dragging');

                    if (draggedItem && data.category === zoneCategory) {
                        // Acerto!
                        zone.appendChild(draggedItem);
                        draggedItem.style.opacity = '0.8';
                        draggedItem.draggable = false;

                        classificationCorrect++;
                        updateClassificationProgress();

                        if (classificationCorrect <= 3) {
                            earnClassificationStar();
                        }

                        if (classificationCorrect === classificationItems.length) {
                            showClassificationFeedback('üéâ PARAB√âNS! Voc√™ organizou tudo perfeitamente! Voc√™ √© muito inteligente! üåü', 'celebration');
                        } else {
                            showClassificationFeedback(`üòä Muito bem! ${data.feedback}`, 'success');
                        }
                    } else {
                        showClassificationFeedback('üíù Quase acertou! Tente de novo! Voc√™ consegue!', 'encouragement');
                    }
                });
            });
        }

        function earnClassificationStar() {
            const stars = document.querySelectorAll('#classification-game .level-star');
            if (stars[classificationStars]) {
                stars[classificationStars].classList.add('earned');
                classificationStars++;
            }
        }

        function updateClassificationProgress() {
            const progress = (classificationCorrect / classificationItems.length) * 100;
            const progressBar = document.getElementById('classification-progress');
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '% Completo';
        }

        function showClassificationFeedback(message, type) {
            const feedback = document.getElementById('classification-feedback');
            feedback.textContent = message;
            feedback.className = `feedback ${type}`;
            feedback.style.display = 'block';

            setTimeout(() => {
                if (type !== 'celebration') {
                    feedback.style.display = 'none';
                }
            }, 4000);
        }

        // =====================================================================================
        // JOGO 4: MEM√ìRIA CULTURAL (DEFICI√äNCIA INTELECTUAL)
        // =====================================================================================

        let memoryPairs = [
            { material: { icon: 'üé∏', name: 'Viol√£o' }, imaterial: { icon: 'üéµ', name: 'M√∫sica' } },
            { material: { icon: 'üç≥', name: 'Panela' }, imaterial: { icon: 'üìù', name: 'Receita' } },
            { material: { icon: 'üëó', name: 'Roupa' }, imaterial: { icon: 'üíÉ', name: 'Dan√ßa' } },
            { material: { icon: 'üìö', name: 'Livro' }, imaterial: { icon: 'üìñ', name: 'Hist√≥ria' } }
        ];

        let memoryCards = [];
        let flippedCards = [];
        let matchedPairs = 0;

        function startMemoryGame() {
            gameManager.startGame('memory');
            document.getElementById('memory-game').classList.add('active');
            createMemoryCards();
        }

        function resetMemoryGame() {
            matchedPairs = 0;
            flippedCards = [];
            updateMemoryProgress();
            document.getElementById('memory-feedback').style.display = 'none';
            createMemoryCards();
        }

        function createMemoryCards() {
            const container = document.getElementById('memory-container');
            container.innerHTML = '';

            memoryCards = [];
            memoryPairs.forEach((pair, index) => {
                memoryCards.push({
                    id: `material-${index}`,
                    icon: pair.material.icon,
                    name: pair.material.name,
                    pair: index,
                    type: 'material'
                });
                memoryCards.push({
                    id: `imaterial-${index}`,
                    icon: pair.imaterial.icon,
                    name: pair.imaterial.name,
                    pair: index,
                    type: 'imaterial'
                });
            });

            // Embaralha
            memoryCards.sort(() => Math.random() - 0.5);

            memoryCards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'memory-card';
                cardElement.dataset.cardId = card.id;
                cardElement.dataset.pair = card.pair;
                cardElement.innerHTML = '<div style="font-size: 2rem;">?</div>';
                cardElement.addEventListener('click', () => flipMemoryCard(cardElement, card));
                container.appendChild(cardElement);
            });

            updateMemoryProgress();
        }

        function flipMemoryCard(cardElement, card) {
            if (cardElement.classList.contains('flipped') || cardElement.classList.contains('matched') || flippedCards.length >= 2) {
                return;
            }

            cardElement.classList.add('flipped');
            cardElement.innerHTML = `
                <div style="font-size: 1.5rem;">${card.icon}</div>
                <div style="font-size: 0.8rem; margin-top: 5px;">${card.name}</div>
            `;
            flippedCards.push({ element: cardElement, card });

            if (flippedCards.length === 2) {
                setTimeout(checkMemoryMatch, 1000);
            }
        }

        function checkMemoryMatch() {
            const [first, second] = flippedCards;

            if (first.card.pair === second.card.pair) {
                // Match!
                first.element.classList.add('matched');
                second.element.classList.add('matched');
                matchedPairs++;

                updateMemoryProgress();

                if (matchedPairs === 4) {
                    showMemoryFeedback('üéâ Parab√©ns! Voc√™ encontrou todos os pares! Sua mem√≥ria √© excelente!', 'celebration');
                } else {
                    showMemoryFeedback('‚úÖ Muito bem! Voc√™ encontrou um par!', 'success');
                }
            } else {
                // No match
                setTimeout(() => {
                    first.element.classList.remove('flipped');
                    second.element.classList.remove('flipped');
                    first.element.innerHTML = '<div style="font-size: 2rem;">?</div>';
                    second.element.innerHTML = '<div style="font-size: 2rem;">?</div>';
                }, 500);

                showMemoryFeedback('üí™ Continue tentando! Voc√™ consegue!', 'encouragement');
            }

            flippedCards = [];
        }

        function updateMemoryProgress() {
            const progress = (matchedPairs / 4) * 100;
            const progressBar = document.getElementById('memory-progress');
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '% Completo';
        }

        function showMemoryFeedback(message, type) {
            const feedback = document.getElementById('memory-feedback');
            feedback.textContent = message;
            feedback.className = `feedback ${type}`;
            feedback.style.display = 'block';

            setTimeout(() => {
                if (type !== 'celebration') {
                    feedback.style.display = 'none';
                }
            }, 2000);
        }

        // =====================================================================================
        // JOGO 5: HIST√ìRIA INTERATIVA (DEFICI√äNCIA INTELECTUAL)
        // =====================================================================================

        let storyData = {
            scenes: [
                {
                    id: 1,
                    text: "Ana estava caminhando pelo centro do Recife quando ouviu uma m√∫sica muito animada vindo da rua.",
                    question: "O que Ana deveria fazer?",
                    choices: [
                        { text: "Ir ver de onde vem a m√∫sica", next: 2, feedback: "Boa escolha! Ana √© curiosa!" },
                        { text: "Continuar caminhando", next: 3, feedback: "Ana decidiu investigar depois..." }
                    ]
                },
                {
                    id: 2,
                    text: "Ana se aproximou e viu pessoas dan√ßando com sombrinhas coloridas! Era um ensaio de frevo!",
                    question: "O que Ana aprendeu sobre o frevo?",
                    choices: [
                        { text: "√â uma dan√ßa alegre com sombrinhas", next: 4, feedback: "Correto! Ana entendeu!" },
                        { text: "√â uma m√∫sica triste", next: 2, feedback: "N√£o... Ana viu que era alegre!" }
                    ]
                },
                {
                    id: 3,
                    text: "Mais adiante, Ana encontrou um grupo tocando tambores grandes. Era um maracatu!",
                    question: "O que caracteriza o maracatu?",
                    choices: [
                        { text: "Tambores grandes e cortejo", next: 4, feedback: "Perfeito! Ana observou bem!" },
                        { text: "Viol√£o e piano", next: 3, feedback: "N√£o era isso... Ana viu tambores!" }
                    ]
                },
                {
                    id: 4,
                    text: "Ana ficou encantada com a cultura pernambucana! Ela aprendeu sobre frevo e maracatu.",
                    question: "O que Ana deve fazer agora?",
                    choices: [
                        { text: "Contar para os amigos o que aprendeu", next: 5, feedback: "√ìtima ideia! Compartilhar conhecimento!" },
                        { text: "Procurar mais ritmos para conhecer", next: 5, feedback: "Excelente! Ana quer aprender mais!" }
                    ]
                }
            ]
        };

        let currentStoryScene = 1;
        let storyProgress = 0;

        function startStoryGame() {
            gameManager.startGame('story');
            document.getElementById('story-game').classList.add('active');
            currentStoryScene = 1;
            storyProgress = 0;
            loadStoryScene();
        }

        function resetStoryGame() {
            currentStoryScene = 1;
            storyProgress = 0;
            updateStoryProgress();
            document.getElementById('story-feedback').style.display = 'none';
            loadStoryScene();
        }

        function loadStoryScene() {
            const scene = storyData.scenes.find(s => s.id === currentStoryScene);
            if (!scene) return;

            const container = document.getElementById('story-container');
            container.innerHTML = `
                <div class="story-scene">
                    <h3>üìñ Aventura de Ana</h3>
                    <p style="font-size: 1.1rem; line-height: 1.6;">${scene.text}</p>

                    <div style="margin: 20px 0;">
                        <strong>${scene.question}</strong>
                    </div>

                    <div class="story-choices">
                        ${scene.choices.map((choice, index) => `
                            <div class="story-choice" onclick="makeStoryChoice(${index})">
                                ${choice.text}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            updateStoryProgress();
        }

        function makeStoryChoice(choiceIndex) {
            const scene = storyData.scenes.find(s => s.id === currentStoryScene);
            const choice = scene.choices[choiceIndex];

            storyProgress += 20;
            updateStoryProgress();

            showStoryFeedback(choice.feedback, 'success');

            setTimeout(() => {
                if (choice.next <= storyData.scenes.length) {
                    currentStoryScene = choice.next;
                    loadStoryScene();
                } else {
                    showStoryFeedback('üéâ Parab√©ns! Ana completou sua aventura cultural! Voc√™ a ajudou muito bem!', 'celebration');
                }
            }, 2000);
        }

        function updateStoryProgress() {
            const progressBar = document.getElementById('story-progress');
            progressBar.style.width = storyProgress + '%';
            progressBar.textContent = Math.round(storyProgress) + '% da Hist√≥ria';
        }

        function showStoryFeedback(message, type) {
            const feedback = document.getElementById('story-feedback');
            feedback.textContent = message;
            feedback.className = `feedback ${type}`;
            feedback.style.display = 'block';

            setTimeout(() => {
                if (type !== 'celebration') {
                    feedback.style.display = 'none';
                }
            }, 1500);
        }

        // =====================================================================================
        // JOGO 6: QUEBRA-CABE√áA DE PALAVRAS (DEFICI√äNCIA VISUAL)
        // =====================================================================================

        let wordPuzzles = [
            { word: 'FREVO', scrambled: 'VERFO', hint: 'Dan√ßa com sombrinha' },
            { word: 'MARACATU', scrambled: 'TUACARAM', hint: 'Cortejo com rei e rainha' },
            { word: 'CIRANDA', scrambled: 'DANCIRA', hint: 'Dan√ßa em roda na praia' }
        ];

        let currentWordIndex = 0;
        let solvedWords = 0;

        function startWordGame() {
            gameManager.startGame('word');
            document.getElementById('word-game').classList.add('active');
            currentWordIndex = 0;
            solvedWords = 0;
            loadWordPuzzle();
        }

        function resetWordGame() {
            currentWordIndex = 0;
            solvedWords = 0;
            updateWordProgress();
            document.getElementById('word-feedback').style.display = 'none';
            loadWordPuzzle();
        }

        function loadWordPuzzle() {
            const container = document.getElementById('word-container');
            container.innerHTML = '';

            wordPuzzles.forEach((puzzle, index) => {
                const puzzleDiv = document.createElement('div');
                puzzleDiv.className = 'word-scramble';
                puzzleDiv.innerHTML = `
                    <h3 style="color: #1f2937;">Palavra ${index + 1}</h3>
                    <p style="font-size: 1.1rem; background: #fef3c7; padding: 10px; border-radius: 5px;">
                        üí° Dica: ${puzzle.hint}
                    </p>
                    <div class="scrambled-letters" data-word="${puzzle.word}" data-index="${index}">
                        ${puzzle.scrambled.split('').map(letter => `
                            <div class="letter-tile">${letter}</div>
                        `).join('')}
                    </div>
                    <div style="margin: 15px 0; font-weight: bold; font-size: 1.2rem;" id="word-result-${index}">
                        ${puzzle.word.split('').map(() => '_').join(' ')}
                    </div>
                    <button class="btn btn-hint" onclick="solveWord(${index})">‚úÖ Resolver</button>
                `;
                container.appendChild(puzzleDiv);
            });

            setupWordInteractions();
            updateWordProgress();
        }

        function setupWordInteractions() {
            document.querySelectorAll('.letter-tile').forEach(tile => {
                tile.addEventListener('click', () => {
                    tile.classList.toggle('selected');

                    const container = tile.closest('.scrambled-letters');
                    const selectedTiles = container.querySelectorAll('.letter-tile.selected');
                    const selectedWord = Array.from(selectedTiles).map(t => t.textContent).join('');
                    const targetWord = container.dataset.word;
                    const index = parseInt(container.dataset.index);

                    document.getElementById(`word-result-${index}`).textContent =
                        selectedWord.padEnd(targetWord.length, '_').split('').join(' ');

                    if (selectedWord === targetWord) {
                        solveWord(index);
                    }
                });
            });
        }

        function solveWord(index) {
            const puzzle = wordPuzzles[index];
            const resultEl = document.getElementById(`word-result-${index}`);
            resultEl.textContent = puzzle.word.split('').join(' ');
            resultEl.style.color = '#059669';
            resultEl.style.fontWeight = 'bold';

            solvedWords++;
            updateWordProgress();

            if (solvedWords === wordPuzzles.length) {
                showWordFeedback('üéâ Parab√©ns! Voc√™ decifrou todas as palavras culturais!', 'celebration');
            } else {
                showWordFeedback(`‚úÖ Correto! "${puzzle.word}" - ${puzzle.hint}`, 'success');
            }
        }

        function updateWordProgress() {
            const progress = (solvedWords / wordPuzzles.length) * 100;
            const progressBar = document.getElementById('word-progress');
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '% Completo';
        }

        function showWordFeedback(message, type) {
            const feedback = document.getElementById('word-feedback');
            feedback.textContent = message;
            feedback.className = `feedback ${type}`;
            feedback.style.display = 'block';

            setTimeout(() => {
                if (type !== 'celebration') {
                    feedback.style.display = 'none';
                }
            }, 3000);
        }

        // =====================================================================================
        // JOGO 7: RECONHECIMENTO DE √ÅUDIO (DEFICI√äNCIA VISUAL)
        // =====================================================================================

        let audioQuestions = [
            {
                sound: 'frevo', // Simulado
                question: 'Que ritmo voc√™ est√° ouvindo?',
                options: ['Frevo', 'Maracatu', 'Ciranda'],
                correct: 0,
                description: 'Som r√°pido de instrumentos de sopro'
            },
            {
                sound: 'maracatu',
                question: 'Qual √© este ritmo?',
                options: ['Frevo', 'Maracatu', 'Coco'],
                correct: 1,
                description: 'Som de tambores grandes (alfaias)'
            }
        ];

        let currentAudioQuestion = 0;
        let audioCorrect = 0;

        function startAudioGame() {
            gameManager.startGame('audio');
            document.getElementById('audio-game').classList.add('active');
            currentAudioQuestion = 0;
            audioCorrect = 0;
            loadAudioQuestion();
        }

        function resetAudioGame() {
            currentAudioQuestion = 0;
            audioCorrect = 0;
            updateAudioProgress();
            document.getElementById('audio-feedback').style.display = 'none';
            loadAudioQuestion();
        }

        function loadAudioQuestion() {
            if (currentAudioQuestion >= audioQuestions.length) {
                showAudioFeedback('üéâ Parab√©ns! Voc√™ reconheceu todos os ritmos pelo som!', 'celebration');
                return;
            }

            const question = audioQuestions[currentAudioQuestion];
            const container = document.getElementById('audio-container');

            container.innerHTML = `
                <h3>üéß Pergunta ${currentAudioQuestion + 1}</h3>
                <p style="font-size: 1.2rem; background: #fee2e2; padding: 15px; border-radius: 8px; border: 2px solid #ef4444;">
                    ${question.question}
                </p>
                <p style="font-size: 1rem; color: #666;">
                    (Simula√ß√£o: ${question.description})
                </p>

                <div class="audio-controls">
                    <button class="audio-btn" onclick="playSimulatedAudio('${question.sound}')">‚ñ∂Ô∏è Reproduzir</button>
                    <button class="audio-btn" onclick="playSimulatedAudio('${question.sound}')">üîÑ Repetir</button>
                </div>

                <div id="audio-choices">
                    ${question.options.map((option, index) => `
                        <button class="btn" style="margin: 10px; padding: 15px 30px; font-size: 1.2rem;"
                                onclick="selectAudioAnswer(${index})">
                            ${option}
                        </button>
                    `).join('')}
                </div>
            `;

            updateAudioProgress();
        }

        function playSimulatedAudio(soundType) {
            const descriptions = {
                'frevo': 'üé∫ Reproduzindo: Som acelerado de metais (trompetes, trombones)',
                'maracatu': 'ü•Å Reproduzindo: Som profundo de tambores grandes',
                'ciranda': 'üéµ Reproduzindo: Som suave de voz e viol√£o'
            };

            showAudioFeedback(descriptions[soundType] || 'Reproduzindo √°udio...', 'hint');
        }

        function selectAudioAnswer(selectedIndex) {
            const question = audioQuestions[currentAudioQuestion];

            if (selectedIndex === question.correct) {
                audioCorrect++;
                showAudioFeedback('üéµ Correto! Voc√™ reconheceu o ritmo!', 'success');
            } else {
                showAudioFeedback('üéß Tente ouvir novamente. Foque nos instrumentos.', 'encouragement');
            }

            setTimeout(() => {
                currentAudioQuestion++;
                loadAudioQuestion();
            }, 2000);
        }

        function updateAudioProgress() {
            const progress = (currentAudioQuestion / audioQuestions.length) * 100;
            const progressBar = document.getElementById('audio-progress');
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '% Completo';
        }

        function showAudioFeedback(message, type) {
            const feedback = document.getElementById('audio-feedback');
            feedback.textContent = message;
            feedback.className = `feedback ${type}`;
            feedback.style.display = 'block';

            setTimeout(() => {
                if (type !== 'celebration') {
                    feedback.style.display = 'none';
                }
            }, 2000);
        }

        // =====================================================================================
        // JOGO 8: CONSTRUTOR DE RITMOS (DEFICI√äNCIA MOTORA)
        // =====================================================================================

        let rhythmPattern = [];
        let targetPattern = ['ü•Å', 'üéµ', 'ü•Å', 'üéµ'];
        let builderProgress = 0;

        function startRhythmBuilder() {
            gameManager.startGame('builder');
            document.getElementById('rhythm-builder').classList.add('active');
            rhythmPattern = [];
            builderProgress = 0;
            setupRhythmBuilder();
        }

        function resetRhythmBuilder() {
            rhythmPattern = [];
            builderProgress = 0;
            updateBuilderProgress();
            document.getElementById('builder-feedback').style.display = 'none';
            setupRhythmBuilder();
        }

        function setupRhythmBuilder() {
            const container = document.getElementById('rhythm-builder-container');
            container.innerHTML = `
                <div style="text-align: center; margin: 20px 0;">
                    <h3>üéµ Construa este ritmo:</h3>
                    <div style="font-size: 3rem; padding: 20px; background: #f0f9ff; border-radius: 10px; margin: 20px 0;">
                        ${targetPattern.join(' ')}
                    </div>
                </div>

                <div style="text-align: center; margin: 20px 0;">
                    <h4>Seu ritmo:</h4>
                    <div id="current-pattern" style="font-size: 3rem; padding: 20px; background: #fff; border: 2px dashed #06b6d4; border-radius: 10px; min-height: 80px;">
                        ${rhythmPattern.join(' ') || 'Comece clicando nos bot√µes abaixo!'}
                    </div>
                </div>

                <div style="display: flex; gap: 20px; justify-content: center; margin: 30px 0;">
                    <button class="btn" style="font-size: 2rem; padding: 20px 30px; background: #ef4444;" onclick="addToPattern('ü•Å')">
                        ü•Å Tambor
                    </button>
                    <button class="btn" style="font-size: 2rem; padding: 20px 30px; background: #3b82f6;" onclick="addToPattern('üéµ')">
                        üéµ Nota
                    </button>
                    <button class="btn" style="font-size: 1rem; padding: 15px 20px; background: #f59e0b;" onclick="removeLastFromPattern()">
                        ‚Ü∂ Desfazer
                    </button>
                    <button class="btn" style="font-size: 1rem; padding: 15px 20px; background: #10b981;" onclick="checkRhythmPattern()">
                        ‚úì Verificar
                    </button>
                </div>
            `;

            updateBuilderProgress();
        }

        function addToPattern(symbol) {
            if (rhythmPattern.length < targetPattern.length) {
                rhythmPattern.push(symbol);
                updateCurrentPattern();

                if (rhythmPattern.length === targetPattern.length) {
                    setTimeout(checkRhythmPattern, 500);
                }
            }
        }

        function removeLastFromPattern() {
            if (rhythmPattern.length > 0) {
                rhythmPattern.pop();
                updateCurrentPattern();
            }
        }

        function updateCurrentPattern() {
            const patternEl = document.getElementById('current-pattern');
            patternEl.textContent = rhythmPattern.join(' ') || 'Comece clicando nos bot√µes abaixo!';
        }

        function checkRhythmPattern() {
            const isCorrect = JSON.stringify(rhythmPattern) === JSON.stringify(targetPattern);

            if (isCorrect) {
                builderProgress = 100;
                updateBuilderProgress();
                showBuilderFeedback('üéâ Perfeito! Voc√™ construiu o ritmo corretamente! ü•Åüéµ', 'celebration');
            } else {
                const correctCount = rhythmPattern.filter((symbol, index) => symbol === targetPattern[index]).length;
                builderProgress = (correctCount / targetPattern.length) * 100;
                updateBuilderProgress();
                showBuilderFeedback(`üí™ Quase l√°! ${correctCount}/${targetPattern.length} posi√ß√µes corretas. Continue tentando!`, 'encouragement');
            }
        }

        function updateBuilderProgress() {
            const progressBar = document.getElementById('builder-progress');
            progressBar.style.width = builderProgress + '%';
            progressBar.textContent = Math.round(builderProgress) + '% Completo';
        }

        function showBuilderFeedback(message, type) {
            const feedback = document.getElementById('builder-feedback');
            feedback.textContent = message;
            feedback.className = `feedback ${type}`;
            feedback.style.display = 'block';

            setTimeout(() => {
                if (type !== 'celebration') {
                    feedback.style.display = 'none';
                }
            }, 3000);
        }

        // =====================================================================================
        // INICIALIZA√á√ÉO
        // =====================================================================================

        document.addEventListener('DOMContentLoaded', () => {
            console.log('üéÆ Sistema de Jogos Adaptativos carregado!');

            // Mostra estat√≠sticas do sistema
            setTimeout(() => {
                const totalGames = document.querySelectorAll('.game-card').length;
                console.log(`üìä ${totalGames} jogos adaptativos dispon√≠veis`);
                console.log('üéØ Tipos de adapta√ß√£o: TEA, TDAH, Down, DI, Visual, Motora');
            }, 1000);
        });
    </script>
</body>
</html>